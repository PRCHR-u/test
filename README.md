# Django REST API для сети по продаже электроники

Этот проект представляет собой REST API для управления иерархической сетью поставщиков электроники. Приложение построено на Django с использованием Django REST Framework и работает в контейнерах Docker.

## Технологический стек

- **Backend:** Python 3.11, Django 3.2, Django REST Framework 3.13
- **База данных:** PostgreSQL 13
- **Контейнеризация:** Docker, Docker Compose

## Быстрый старт

Для запуска проекта на локальной машине убедитесь, что у вас установлены Docker и Docker Compose.

1.  **Склонируйте репозиторий:**
    ```bash
    git clone <URL вашего репозитория>
    cd <папка проекта>
    ```

2.  **Создайте файл `.env`:**

    В корне проекта создайте файл `.env` для хранения секретных данных. Вы можете скопировать и отредактировать пример:
    ```bash
    cp .env.example .env
    ```
    *Заполните переменные в файле `.env` вашими данными.*

3.  **Запустите проект с помощью Docker Compose:**

    Выполните команду в корневой директории проекта:
    ```bash
    docker-compose up --build
    ```
    Эта команда соберет образы, создаст контейнеры и запустит Django-приложение и базу данных PostgreSQL. Приложение будет доступно по адресу [http://localhost:8000](http://localhost:8000).

4.  **Примените миграции:**

    В отдельном терминале выполните:
    ```bash
    docker-compose exec web python manage.py migrate
    ```

5.  **Создайте суперпользователя:**

    Чтобы получить доступ к административной панели Django, создайте суперпользователя:
    ```bash
    docker-compose exec web python manage.py createsuperuser
    ```
    Следуйте инструкциям в терминале, чтобы задать имя, email и пароль.

## Доступ к административной панели

Админка Django доступна по адресу: [http://localhost:8000/admin/](http://localhost:8000/admin/)

Используйте данные суперпользователя, созданные на предыдущем шаге, для входа.

## API Endpoints

API доступно по префиксу `/api/`. Доступ к API разрешен только для активных сотрудников (`is_active=True`).

### Основные эндпоинты:

-   `GET /api/nodes/`: Получение списка всех узлов сети.
    -   **Фильтрация:**
        -   `/api/nodes/?country=<название страны>`: Фильтрация узлов по стране.
-   `POST /api/nodes/`: Создание нового узла сети.
-   `GET /api/nodes/<id>/`: Получение детальной информации об узле.
-   `PUT/PATCH /api/nodes/<id>/`: Обновление информации об узле.
-   `DELETE /api/nodes/<id>/`: Удаление узла.

-   `GET /api/products/`: Получение списка всех продуктов.
-   `POST /api/products/`: Создание нового продукта.
-   *Аналогичные эндпоинты для `GET`, `PUT`, `PATCH`, `DELETE` для отдельных продуктов.*

### Важные ограничения:

-   **Запрет на обновление задолженности:** Поле `debt` в отношениях "поставщик-клиент" не может быть обновлено через API. Любые попытки изменения будут проигнорированы.
-   **Иерархия:** Нельзя сделать узел поставщиком самому себе. Также система не допускает создания циклических зависимостей в цепочке поставок.
